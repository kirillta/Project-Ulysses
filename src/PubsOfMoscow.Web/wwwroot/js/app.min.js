"use strict";function getRounds(){sendRequest("GET","rounds",null,renderPubChart)}function sendCongratulation(){var n=document.getElementById("CongratulationText"),t={content:n.value};sendRequest("POST","congratulations",t);n.value="";document.getElementById("CongratulationSubmit").value="Написать ещё"}function sendRequest(n,t,i,r){var f="/api/"+t,u=new XMLHttpRequest;u.open(n,f,!0);u.contentType="application/json";u.setRequestHeader("content-type","application/json");u.setRequestHeader("cache-control","no-cache");i!==null?u.send(JSON.stringify(i)):u.send();u.onreadystatechange=function(){if(u.readyState===4)if(document.body.style.cursor="default",u.status>=200&&u.status<300){if(r!==undefined&&r!==null){var n=JSON.parse(u.responseText);r(n)}}else console.log(u.status+": "+u.statusText)};document.body.style.cursor="wait"}function assignCongratulationEvent(){var n=document.getElementById("CongratulationSubmit");n.addEventListener("click",sendCongratulation)}function ready(){getRounds();assignCongratulationEvent()}var getPubDescription=function(n){var t="deactivated",i=n.title;return n.isChosen&&(t="activated",i+=" ⭐"),'<div class="pub-desc '+t+' text-centered">\n        <span class="title">'+i+'<\/span>\n        <br />\n        <span class="address">'+n.address+'<\/span>\n        <div class ="time-frame">'+n.estimateStartTime+"<\/div>\n    <\/div>"},getPubGroup=function(n){var r='<hr /><div id="Group'+n.number+'" class="pub-chart">',i=!0,u=!1,f=undefined,t,e,o;try{for(t=n.pubs[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)o=e.value,r+=getPubDescription(o)}catch(s){u=!0;f=s}finally{try{!i&&t["return"]&&t["return"]()}finally{if(u)throw f;}}return r+"<\/div>"},renderPubChart=function(n){var s=document.getElementById("PubChart"),r="",i=!0,u=!1,f=undefined,t,e,o;try{for(t=n[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)o=e.value,r+=getPubGroup(o)}catch(h){u=!0;f=h}finally{try{!i&&t["return"]&&t["return"]()}finally{if(u)throw f;}}s.innerHTML=r.substring(6)};document.addEventListener("DOMContentLoaded",ready);